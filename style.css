@charset "UTF-8";

:root {
  --scene-scale: 1;
  --scene-translate-y: 0;
  --h-red: 356deg;
  --h-orange: 32deg;
  --h-gold: 50deg;
  --h-green: 122deg;
  --h-teal: 175deg;
  --h-blue: 220deg;
  --h-violet: 285deg;
  --h-pink: 320deg;
}

html {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

body,
div {
  display: grid;
}

audio {
  display: none;
}

body {
  place-content: center;
  place-items: center;
  overflow: hidden;
  margin: 0;
  height: 100vh;
  min-height: 100vh;
  min-height: 100dvh;
  width: 100vw;
  perspective: 35em;
  background: #000014;
  position: relative;
  overflow: hidden;
}

.aurora {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  filter: blur(45px);
  opacity: 0;
  transition: opacity 0.6s ease;
}

.aurora.is-on {
  opacity: 1;
}

.aurora::before,
.aurora::after {
  content: "";
  position: absolute;
  inset: -10%;
  background: radial-gradient(
      circle at 32% 42%,
      rgba(0, 255, 209, 0.35),
      transparent 46%
    ),
    radial-gradient(circle at 74% 58%, rgba(92, 150, 255, 0.3), transparent 50%);
  animation: drift 42s ease-in-out infinite alternate;
}

.aurora::after {
  background: radial-gradient(
      circle at 40% 68%,
      rgba(255, 190, 92, 0.25),
      transparent 45%
    ),
    radial-gradient(circle at 62% 32%, rgba(173, 92, 255, 0.32), transparent 50%);
  animation-duration: 56s;
  animation-delay: -9s;
}

.controls {
  position: fixed;
  top: calc(max(env(safe-area-inset-top, 0px), 0.6rem) + 0.4rem);
  right: calc(max(env(safe-area-inset-right, 0px), 0.6rem) + 0.4rem);
  display: grid;
  gap: 0.7rem;
  z-index: 30;
  pointer-events: auto;
  transform: translateZ(0);
  isolation: isolate;
}

div {
  transform-style: preserve-3d;
}

.a3d {
  --m: calc(0.5 * (var(--n-stars) - 1));
  --t: calc(0.33333 * var(--n-stars) * 0.1s);
  animation: roty 20s linear var(--t) infinite reverse;
  transform: translateY(var(--scene-translate-y)) scale(var(--scene-scale));
}

@keyframes roty {
  to {
    rotate: y 1turn;
  }
}

@keyframes drift {
  0% {
    transform: translate3d(-4%, -2%, 0) scale(1);
  }

  50% {
    transform: translate3d(3%, 4%, 0) scale(1.08);
  }

  100% {
    transform: translate3d(-2%, 6%, 0) scale(1.04);
  }
}

.✴️ {
  --q: Min(1, var(--j));
  --p: calc(1 - var(--q));
  --base-h: calc(var(--j) / var(--n-stars) * 360deg);
  --h: var(--base-h);
  --s: calc((1.25 * var(--p) + var(--q) * var(--sf)) * 2em);
  --ay0: calc(var(--i) / var(--n-arms) * 1turn);
  --ay1: calc(var(--ay0) - var(--n-loops) * 1turn);
  --ay: calc(
    (var(--j) / var(--n-stars) * var(--n-loops) + var(--i) / var(--n-arms)) *
      1turn
  );
  --tx: calc(var(--q) * var(--rox) * 2em);
  --ty0: calc(var(--m) / var(--n-stars) * 20em);
  --ty1: calc(-1 * var(--ty0) - 0.75 * 2em);
  --ty: calc(
    (var(--j) - var(--m)) / var(--n-stars) * 20em +
      (var(--q) * var(--roy) - var(--p) * 0.75) * 2em
  );
  --tz: calc(var(--j) / var(--n-stars) * 10em + var(--q) * var(--roz) * 2em);
  grid-area: 1/ 1;
  width: var(--s);
  height: var(--s);
  --pos: rotatey(var(--ay)) translate3d(var(--tx), var(--ty), var(--tz))
    rotatey(calc(-1 * var(--ay)));
  transform: var(--pos);
  --dt: calc(0.33333 * (var(--n-stars) - var(--j)) * 0.1s);
  animation: grow calc(var(--q) * 0.1s) ease-out var(--dt) backwards,
    move calc(var(--p) * var(--t)) linear;
  --glow: hsl(var(--h) 92% 74%);
}

.✴️:nth-child(8n + 1) {
  --h: var(--h-red);
}

.✴️:first-child {
  --h: var(--h-blue);
}

.✴️:nth-child(8n + 2) {
  --h: var(--h-orange);
}

.✴️:nth-child(8n + 3) {
  --h: var(--h-gold);
}

.✴️:nth-child(8n + 4) {
  --h: var(--h-green);
}

.✴️:nth-child(8n + 5) {
  --h: var(--h-teal);
}

.✴️:nth-child(8n + 6) {
  --h: var(--h-blue);
}

.✴️:nth-child(8n + 7) {
  --h: var(--h-violet);
}

.✴️:nth-child(8n) {
  --h: var(--h-pink);
}

.✴️::after {
  opacity: calc(var(--p) + var(--q) * var(--j) / var(--n-stars) + 0.25);
  background: radial-gradient(
    circle,
    hsl(var(--h) 92% 70%) 12%,
    hsl(calc(var(--h) + 22deg) 92% 60%) 38%,
    rgba(255, 255, 255, 0.18)
  );
  clip-path: polygon(
    50% 0%,
    53.53553% 41.46447%,
    85.35534% 14.64466%,
    58.53553% 46.46447%,
    100% 50%,
    58.53553% 53.53553%,
    85.35534% 85.35534%,
    53.53553% 58.53553%,
    50% 100%,
    46.46447% 58.53553%,
    14.64466% 85.35534%,
    41.46447% 53.53553%,
    0% 50%,
    41.46447% 46.46447%,
    14.64466% 14.64466%,
    46.46447% 41.46447%
  );
  filter: drop-shadow(0 0 0.65em var(--glow))
    drop-shadow(0 0 0.35em rgba(255, 255, 255, 0.3));
  animation: roty 20s linear var(--t) infinite;
  content: "";
}

@keyframes grow {
  0% {
    transform: var(--pos) scale(0);
  }
}

@keyframes move {
  0% {
    transform: rotatey(var(--ay0)) translate3d(0, var(--ty0), 10em)
      rotatey(calc(-1 * var(--ay0)));
  }

  100% {
    transform: rotatey(var(--ay1)) translate3d(0, var(--ty1), 0)
      rotatey(calc(-1 * var(--ay1)));
  }
}

@keyframes puls {
  to {
    scale: 0.2;
    opacity: 0.2;
  }
}

@keyframes hue {
  to {
    filter: hue-rotate(360deg);
  }
}

.✴️:nth-child(n + 1) {
  --i: 0;
}

.✴️:nth-child(n + 101) {
  --i: 1;
}

.✴️:nth-child(100n + 1) {
  --j: 0;
}

.✴️:nth-child(100n + 2) {
  --j: 1;
}

.✴️:nth-child(100n + 3) {
  --j: 2;
}

.✴️:nth-child(100n + 4) {
  --j: 3;
}

.✴️:nth-child(100n + 5) {
  --j: 4;
}

.✴️:nth-child(100n + 6) {
  --j: 5;
}

.✴️:nth-child(100n + 7) {
  --j: 6;
}

.✴️:nth-child(100n + 8) {
  --j: 7;
}

.✴️:nth-child(100n + 9) {
  --j: 8;
}

.✴️:nth-child(100n + 10) {
  --j: 9;
}

.✴️:nth-child(100n + 11) {
  --j: 10;
}

.✴️:nth-child(100n + 12) {
  --j: 11;
}

.✴️:nth-child(100n + 13) {
  --j: 12;
}

.✴️:nth-child(100n + 14) {
  --j: 13;
}

.✴️:nth-child(100n + 15) {
  --j: 14;
}

.✴️:nth-child(100n + 16) {
  --j: 15;
}

.✴️:nth-child(100n + 17) {
  --j: 16;
}

.✴️:nth-child(100n + 18) {
  --j: 17;
}

.✴️:nth-child(100n + 19) {
  --j: 18;
}

.✴️:nth-child(100n + 20) {
  --j: 19;
}

.✴️:nth-child(100n + 21) {
  --j: 20;
}

.✴️:nth-child(100n + 22) {
  --j: 21;
}

.✴️:nth-child(100n + 23) {
  --j: 22;
}

.✴️:nth-child(100n + 24) {
  --j: 23;
}

.✴️:nth-child(100n + 25) {
  --j: 24;
}

.✴️:nth-child(100n + 26) {
  --j: 25;
}

.✴️:nth-child(100n + 27) {
  --j: 26;
}

.✴️:nth-child(100n + 28) {
  --j: 27;
}

.✴️:nth-child(100n + 29) {
  --j: 28;
}

.✴️:nth-child(100n + 30) {
  --j: 29;
}

.✴️:nth-child(100n + 31) {
  --j: 30;
}

.✴️:nth-child(100n + 32) {
  --j: 31;
}

.✴️:nth-child(100n + 33) {
  --j: 32;
}

.✴️:nth-child(100n + 34) {
  --j: 33;
}

.✴️:nth-child(100n + 35) {
  --j: 34;
}

.✴️:nth-child(100n + 36) {
  --j: 35;
}

.✴️:nth-child(100n + 37) {
  --j: 36;
}

.✴️:nth-child(100n + 38) {
  --j: 37;
}

.✴️:nth-child(100n + 39) {
  --j: 38;
}

.✴️:nth-child(100n + 40) {
  --j: 39;
}

.✴️:nth-child(100n + 41) {
  --j: 40;
}

.✴️:nth-child(100n + 42) {
  --j: 41;
}

.✴️:nth-child(100n + 43) {
  --j: 42;
}

.✴️:nth-child(100n + 44) {
  --j: 43;
}

.✴️:nth-child(100n + 45) {
  --j: 44;
}

.✴️:nth-child(100n + 46) {
  --j: 45;
}

.✴️:nth-child(100n + 47) {
  --j: 46;
}

.✴️:nth-child(100n + 48) {
  --j: 47;
}

.✴️:nth-child(100n + 49) {
  --j: 48;
}

.✴️:nth-child(100n + 50) {
  --j: 49;
}

.✴️:nth-child(100n + 51) {
  --j: 50;
}

.✴️:nth-child(100n + 52) {
  --j: 51;
}

.✴️:nth-child(100n + 53) {
  --j: 52;
}

.✴️:nth-child(100n + 54) {
  --j: 53;
}

.✴️:nth-child(100n + 55) {
  --j: 54;
}

.✴️:nth-child(100n + 56) {
  --j: 55;
}

.✴️:nth-child(100n + 57) {
  --j: 56;
}

.✴️:nth-child(100n + 58) {
  --j: 57;
}

.✴️:nth-child(100n + 59) {
  --j: 58;
}

.✴️:nth-child(100n + 60) {
  --j: 59;
}

.✴️:nth-child(100n + 61) {
  --j: 60;
}

.✴️:nth-child(100n + 62) {
  --j: 61;
}

.✴️:nth-child(100n + 63) {
  --j: 62;
}

.✴️:nth-child(100n + 64) {
  --j: 63;
}

.✴️:nth-child(100n + 65) {
  --j: 64;
}

.✴️:nth-child(100n + 66) {
  --j: 65;
}

.✴️:nth-child(100n + 67) {
  --j: 66;
}

.✴️:nth-child(100n + 68) {
  --j: 67;
}

.✴️:nth-child(100n + 69) {
  --j: 68;
}

.✴️:nth-child(100n + 70) {
  --j: 69;
}

.✴️:nth-child(100n + 71) {
  --j: 70;
}

.✴️:nth-child(100n + 72) {
  --j: 71;
}

.✴️:nth-child(100n + 73) {
  --j: 72;
}

.✴️:nth-child(100n + 74) {
  --j: 73;
}

.✴️:nth-child(100n + 75) {
  --j: 74;
}

.✴️:nth-child(100n + 76) {
  --j: 75;
}

.✴️:nth-child(100n + 77) {
  --j: 76;
}

.✴️:nth-child(100n + 78) {
  --j: 77;
}

.✴️:nth-child(100n + 79) {
  --j: 78;
}

.✴️:nth-child(100n + 80) {
  --j: 79;
}

.✴️:nth-child(100n + 81) {
  --j: 80;
}

.✴️:nth-child(100n + 82) {
  --j: 81;
}

.✴️:nth-child(100n + 83) {
  --j: 82;
}

.✴️:nth-child(100n + 84) {
  --j: 83;
}

.✴️:nth-child(100n + 85) {
  --j: 84;
}

.✴️:nth-child(100n + 86) {
  --j: 85;
}

.✴️:nth-child(100n + 87) {
  --j: 86;
}

.✴️:nth-child(100n + 88) {
  --j: 87;
}

.✴️:nth-child(100n + 89) {
  --j: 88;
}

.✴️:nth-child(100n + 90) {
  --j: 89;
}

.✴️:nth-child(100n + 91) {
  --j: 90;
}

.✴️:nth-child(100n + 92) {
  --j: 91;
}

.✴️:nth-child(100n + 93) {
  --j: 92;
}

.✴️:nth-child(100n + 94) {
  --j: 93;
}

.✴️:nth-child(100n + 95) {
  --j: 94;
}

.✴️:nth-child(100n + 96) {
  --j: 95;
}

.✴️:nth-child(100n + 97) {
  --j: 96;
}

.✴️:nth-child(100n + 98) {
  --j: 97;
}

.✴️:nth-child(100n + 99) {
  --j: 98;
}

.✴️:nth-child(100n + 100) {
  --j: 99;
}

.greeting {
  position: fixed;
  left: 50%;
  bottom: 8vh;
  transform: translateX(-50%);
  display: flex;
  gap: 0.08em;
  padding: 0.35em 0.75em;
  font-size: clamp(1.6rem, 1.1rem + 2vw, 3rem);
  font-weight: 800;
  letter-spacing: 0.08em;
  font-family: "Trebuchet MS", "Comic Sans MS", cursive;
  background: rgba(0, 0, 20, 0.45);
  backdrop-filter: blur(6px);
  pointer-events: none;
  user-select: none;
}

.aurora-on .greeting {
  background: linear-gradient(
    135deg,
    rgba(0, 198, 255, 0.28),
    rgba(92, 255, 209, 0.24),
    rgba(92, 150, 255, 0.28)
  );
  box-shadow: 0 0.75em 2.2em rgba(0, 0, 0, 0.5),
    0 0.35em 1.1em rgba(92, 150, 255, 0.35);
}

.greeting span {
  display: inline-block;
  background: linear-gradient(135deg, #ff2f4b 0%, #ffd166 50%, #ffffff 100%);
  -webkit-background-clip: text;
  color: transparent;
  filter: drop-shadow(0 0 6px rgba(255, 209, 102, 0.7));
  animation: dance 1.3s ease-in-out infinite;
  animation-delay: calc(var(--i) * 0.08s);
}

.greeting .gap {
  width: clamp(0.6rem, 0.4rem + 0.8vw, 1rem);
}

@keyframes dance {
  0% {
    transform: translateY(0) rotate(-2deg) scale(1);
  }

  25% {
    transform: translateY(-14%) rotate(3deg) scale(1.05);
  }

  50% {
    transform: translateY(0) rotate(-1deg) scale(1);
  }

  75% {
    transform: translateY(-10%) rotate(-3deg) scale(1.04);
  }

  100% {
    transform: translateY(0) rotate(2deg) scale(1);
  }
}

.sound-toggle,
.aurora-toggle {
  padding: 0.85em 1.4em;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: #0a0a1a;
  font-weight: 800;
  letter-spacing: 0.05em;
  font-size: 0.95rem;
  box-shadow: 0 1em 2.4em rgba(0, 0, 0, 0.6);
  cursor: pointer;
  backdrop-filter: blur(4px);
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.3s ease;
  z-index: 1;
  touch-action: manipulation;
}

.sound-toggle {
  background: linear-gradient(
    135deg,
    rgba(255, 47, 75, 0.9),
    rgba(255, 209, 102, 0.9)
  );
  box-shadow: 0 1em 2.4em rgba(0, 0, 0, 0.6),
    0 0.4em 1.1em rgba(255, 209, 102, 0.35);
}

.aurora-toggle {
  background: linear-gradient(
    135deg,
    rgba(0, 198, 255, 0.85),
    rgba(92, 255, 209, 0.85)
  );
  box-shadow: 0 1em 2.4em rgba(0, 0, 0, 0.6),
    0 0.4em 1.1em rgba(92, 255, 209, 0.35);
}

.sound-toggle:hover,
.aurora-toggle:hover {
  transform: translateY(-2px);
  box-shadow: 0 1.4em 2.8em rgba(0, 0, 0, 0.65);
}

.sound-toggle:active,
.aurora-toggle:active {
  transform: translateY(1px) scale(0.99);
}

.sound-toggle:focus-visible,
.aurora-toggle:focus-visible {
  outline: 2px solid rgba(255, 209, 102, 0.7);
  outline-offset: 3px;
}

.sound-toggle[aria-pressed="true"] {
  background: linear-gradient(
    135deg,
    rgba(36, 194, 108, 0.9),
    rgba(154, 230, 110, 0.9)
  );
  box-shadow: 0 1em 2.4em rgba(0, 0, 0, 0.6),
    0 0.4em 1.1em rgba(36, 194, 108, 0.4);
}

.aurora-toggle[aria-pressed="true"] {
  background: linear-gradient(
    135deg,
    rgba(147, 112, 255, 0.9),
    rgba(92, 150, 255, 0.9)
  );
  box-shadow: 0 1em 2.4em rgba(0, 0, 0, 0.6),
    0 0.4em 1.1em rgba(92, 150, 255, 0.45);
}

@media (max-width: 600px) {
  .sound-toggle,
  .aurora-toggle {
    font-size: 1rem;
    padding: 0.9em 1.4em;
    letter-spacing: 0.06em;
  }
}

@media (max-width: 700px) {
  :root {
    --scene-scale: 1.25;
    --scene-translate-y: -4vh;
  }

  .greeting {
    font-size: clamp(1.35rem, 1.15rem + 2vw, 2.4rem);
    padding: 0.35em 0.85em;
    bottom: 16vh;
    letter-spacing: 0.05em;
  }

  .sound-toggle,
  .aurora-toggle {
    font-size: 1rem;
    padding: 0.9em 1.45em;
  }

  .controls {
    top: calc(max(env(safe-area-inset-top, 0px), 0.5rem) + 0.5rem);
    right: calc(max(env(safe-area-inset-right, 0px), 0.5rem) + 0.5rem);
    gap: 0.55rem;
  }
}

@media (max-width: 500px) {
  :root {
    --scene-scale: 1.15;
    --scene-translate-y: -3vh;
  }

  .greeting {
    bottom: 18vh;
  }

  .controls {
    top: calc(max(env(safe-area-inset-top, 0px), 0.45rem) + 0.55rem);
    right: calc(max(env(safe-area-inset-right, 0px), 0.45rem) + 0.55rem);
    gap: 0.45rem;
  }
}

#snow {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}
